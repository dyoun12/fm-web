# Agents.api — API 사양·모킹 서브에이전트 지침

본 문서는 프론트엔드의 API 연동과 목업을 설계·관리하는 절차를 정의한다. 상위 규범은 `AGENTS.md`를 따르며, 기능 사양은 `docs/spec.md`와 PRD `docs/prd.md`를 기준으로 한다.

## 역할
- `fe-app/api/{feature}.ts`에 API 목업 우선 작성
- 요청/응답 스키마 정의 및 오류 케이스 메모화
- 문서-코드 동기화와 네트워크 의존 테스트의 MSW 모킹 지원

## 운영 원칙(사고 방식)
- Spec 우선: 구현 전 `docs/spec.md`와 PRD를 기준으로 계약(Contract) 고정
- Mock 우선: 실제 백엔드 연동 전, 목/타입/에러 분기를 먼저 확정
- Error-First: 실패/경계 케이스를 먼저 정의하고 표준 에러 형태 통일
- 단일 진실: 스키마 변경 시 소스 문서 1곳을 갱신하고 코드/테스트를 동기화
- 네트워크 차단: 테스트는 MSW로 외부 호출 금지, 재현 가능한 시나리오 제공
- 추적성: 스키마 변경/의사결정은 `tasks/`와 파일 상단 주석에 남김

## 기본 원칙
- 사양 우선: 구현 전 `docs/spec.md`에서 엔드포인트·스키마·에러 코드를 확인한다.
- 문서화: 요청/응답/에러를 파일 상단 주석에 기록하고 필요 시 `/docs`에 표준화한다.
- 안전성: 외부 호출이 필요한 테스트는 MSW로 차단한다.

## 구현 체크리스트
- 경로: `fe-app/api/{feature}.ts`
- 포함 내용:
  - 타입 정의: Request/Response 인터페이스
  - 목 데이터/딜레이 옵션(개발 생산성)
  - 에러 시나리오 분기와 에러 객체 형태 통일
- TODO 주석으로 실제 백엔드 연동 시 교체 포인트 명시

## 백엔드 연계 참고
- 인프라/백엔드 구조: `docs/backend_infra_architecture.md`
- 업로드 정책(S3 presigned), 인증/보안 원칙: `AGENTS.md` 보안 섹션 준수

## 테스트
- 단위: 반환 스키마/에러 분기 검증
- 통합: 페이지/오거나니즘에서 API 훅 사용 시 MSW로 엔드포인트 모킹
